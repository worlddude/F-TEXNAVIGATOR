<style>
/* (unchanged UI styles from your original file) */
body {
  margin: 0;
  font-family: sans-serif;
  background: white;
  color: #111;
  display: flex;
  flex-direction: column;
  min-height: 100vh;    /* allow the page to grow */
  height: auto;         /* not fixed to viewport */
  overflow-y: auto;     /* allow vertical scrolling */
  -webkit-overflow-scrolling: touch; /* smooth scrolling on iOS */
}
.header { background: #2563eb; color: white; padding: 10px; display: flex; flex-direction: column; position: relative; }
.search-bar { background: white; border-radius: 6px; padding: 6px 10px; margin-bottom: 0; display: flex; align-items: center; position: relative; }
.search-bar input { border: none; outline: none; flex: 1; font-size: 14px; }
.tabs { display: flex; justify-content: space-around; background: #1e40af; border-radius: 6px; margin-top: 8px; }
.tabs button { flex: 1; background: none; border: none; color: white; padding: 10px; font-size: 14px; transition: background 0.2s; }
.tabs button.active { background: white; color: #2563eb; border-radius: 6px; }
.main { flex: 1; display: flex; justify-content: center; align-items: center; position: relative; overflow: hidden; }
.main.add-tab { justify-content: center; align-items: flex-start; overflow-y: auto; padding: 10px; }

/* Map container and image (new additions, minimal) */
#mapContainer {
  width:100%;
  height:100%;
  overflow: hidden;
  touch-action: none; /* we handle gestures manually for the map only */
  position: absolute;
  left: 0;
  top: 0;
  display: none; /* toggled by tab */
  z-index: 1;
  background: #fff;
  display: flex;
  justify-content: center;
  align-items: center;
}
/* MINIMAL CHANGE: ensure the image fills the container vertically on load
   keep width auto so aspect ratio is preserved. preserve pointer-events none
   so other UI handles input. */
#map {
  will-change: transform;
  transform-origin: 0 0;
  user-select: none;
  -webkit-user-drag: none;
  max-width: none; /* allow free scaling */
  max-height: none;
  pointer-events: none; /* container handles pointer events for panning */
  /* added: make the image fill the container vertically and stay centered */
  height: 100%;
  width: auto;
  object-fit: contain;
  transform: none !important;
}

/* keep original video element for scanning */
#video { width: 100%; height: 100%; object-fit: cover; display: none; }

/* Item card */
.item-card { background: white; border-radius: 16px 16px 0 0; padding: 16px; box-shadow: 0 -2px 10px rgba(0,0,0,0.2); position: relative; bottom: 0; }
.item-card h2 { margin: 0 0 6px; font-size: 16px; }
.item-card p { margin: 4px 0; font-size: 14px; color: #333; }
button.save { margin-top: 8px; padding: 8px 12px; border: none; border-radius: 8px; background: #2563eb; color: white; font-size: 14px; cursor: pointer; }
#addForm { display: flex; flex-direction: column; gap: 8px; max-width: 400px; width: 90%; margin: auto; background: #f9f9f9; padding: 20px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.2); }
#addForm input[type="text"], #addForm input[type="file"] { padding: 6px 10px; font-size: 14px; border: 1px solid #ccc; border-radius: 6px; width: 100%; box-sizing: border-box; }
.item-card.hidden { display: none; }

/* Torch button overlay moved to bottom center */
#torchBtn {
  position: absolute;
  left: 50%;
  bottom: 18px;
  transform: translateX(-50%);
  z-index: 60;
  background: rgba(0,0,0,0.45);
  color: white;
  border: none;
  padding: 12px;
  border-radius: 50%;
  font-size: 18px;
  display: none;
  cursor: pointer;
  box-shadow: 0 2px 6px rgba(0,0,0,0.3);
}

/* hide the old detect counter UI completely */
#detectBadge { display: none !important; }

/* List Page */
#listPage { width: 100%; max-width: 600px; margin: 0 auto; display: flex; flex-direction: column; gap: 10px; }
/* Prevent selection / copy / long-press callout on mobile for list items */
.list-item { background: #fff; border-radius: 8px; padding: 10px; box-shadow: 0 2px 6px rgba(0,0,0,0.08); cursor: pointer; display: flex; align-items: center; gap: 12px; -webkit-user-select: none; user-select: none; -webkit-touch-callout: none; position: relative; overflow: hidden; }
.list-item h3 { margin: 0 0 6px; font-size: 16px; }
.list-item p { margin: 2px 0; font-size: 13px; color: #444; }
.list-thumb { width: 56px; height: 56px; object-fit: cover; border-radius: 8px; background: #f0f0f0; flex: 0 0 56px; }
.load-more { padding: 10px; border-radius: 8px; border: none; background: #1e40af; color: #fff; cursor: pointer; }
.empty { text-align: center; color: #666; padding: 20px; }

/* overlay used for press progress indicator (NEW) */
.press-overlay {
  position: absolute;
  left: 0; top: 0; right: 0; bottom: 0;
  pointer-events: none;
  background: rgba(255, 0, 0, 0.40); /* blue-ish */
  opacity: 0;
  transition: opacity 120ms linear;
  border-radius: 8px;
}

/* item-card photo preview */
#itemPhotoDisplay { width: 72px; height: 72px; object-fit: cover; border-radius: 10px; float: right; margin-left: 10px; }
#photoPreview { width: 72px; height: 72px; object-fit: cover; border-radius: 8px; background: #eee; display: block; }

/* Modal for enlarged photo */
#photoModal {
  display: none;
  position: fixed;
  z-index: 1000;
  left: 0; top: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0,0,0,0.8);
  justify-content: center;
  align-items: center;
}
#photoModal img {
  max-width: 90%;
  max-height: 90%;
  border-radius: 12px;
  box-shadow: 0 4px 20px rgba(0,0,0,0.5);
  cursor: zoom-out;
}
</style>

